name: pm
help: Project manager built on top of tmux
version: 1.4.1

environment_variables:
  - name: PM_INSTALL_DIR
    help: Directory where the repository was cloned
    default: ${HOME}/.pm

  - name: PM_HOME
    help: Directory where the projects will be managed
    default: ${HOME}/dev

  - name: PM_BACKEND
    help: Name of the backend used to open projects
    default: tmux

dependencies:
  - git
  - fd
  - gum
  - rg

commands:
  - name: help
    help: Show help about a command
    args:
    - name: command
      help: Help subject

  - name: new
    help: Create a new empty project
    group: Project

    args:
      - name: name
        help: Name of the new project
        required: true

    flags:
      - short: -s
        long: --space
        help: Space of the new project
        arg: space
        required: true
        validate: space_exists

      - short: -t
        long: --template
        help: Name of the template
        default: default
        arg: template

      - short: -b
        long: --backend
        help: Name of the backend used to open projects
        arg: backend
        default: ${PM_BACKEND}

    examples:
      - pm new recipe --space tools
      - pm new recipe --template cargo --space tools

  - name: clone
    help: Clone a remote git repository
    group: Project

    args:
      - name: repository
        help: "Remote repository to clone (FORMAT: <username>/<repository>)"
        required: true

    flags:
      - short: -s
        long: --space
        help: Space to clone the project in
        arg: space
        required: true
        validate: space_exists

      - short: -n
        long: --name
        help: Name to clone the project as
        arg: name

    examples:
      - pm clone alexis-moins/recipe --space tools
      - pm clone neovim/neovim --space tools --name editor

  - name: open
    help: Open a project
    group: Project

    args:
      - name: name
        help: Name of the project

    flags:
      - short: -s
        long: --space
        help: Space where the project is located
        arg: space
        validate: space_exists

      - short: -b
        long: --backend
        help: Name of the backend used to open projects
        arg: backend
        default: ${PM_BACKEND}

    examples:
      - pm open recipe
      - pm open editor --space tools

  - name: filter
    help: Filter projects by name
    group: Project

    flags:
      - short: -p
        long: --path
        help: Output the full path to the project

    examples:
      - pm filter
      - pm filter --path

  - name: space
    help: Space related commands

    commands:
      - name: help
        help: Show help about a command
        args:
        - name: command
          help: Help subject

      - name: add
        help: Add a new space

        args:
          - name: space
            help: Name of the space to add
            required: true
            validate: space_is_missing

        examples:
          - pm space add personal

      - name: list
        alias: ls
        help: List added spaces

        examples:
          - pm space ls
          - pm space list

      - name: remove
        alias: rm
        help: Remove a space (projects will not be removed)

        args:
          - name: space
            help: Name of the space to remove
            required: true
            validate: space_exists

        examples:
          - pm space rm personal

      - name: filter
        help: Filter spaces by name

        examples:
          - pm space filter

  - name: list
    alias: ls
    help: List projects
    group: Project

    examples:
      - pm ls
      - pm list

  - name: link
    help: Create a link to the pm script

    args:
      - name: path
        help: Path to the link
        default: ${HOME}/.local/bin

    flags:
      - short: -c
        long: --copy
        help: Copy the script instead of creating a symbolic link

    examples:
      - pm link -c
      - pm link /usr/bin

  - name: unlink
    help: Remove the link to the pm script

    args:
      - name: path
        help: Path to the link
        default: ${HOME}/.local/bin

    examples:
      - pm unlink

  - name: update
    help: Update to the latest version

    examples:
      - pm update

  - name: env
    help: Show environment information

    args:
      - name: variable
        help: Name of the environment variable to show
        allowed: [PM_INSTALL_DIR, PM_HOME, PM_BACKEND]

    examples:
      - pm env
